<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Buy Denim Jacket</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">  
    <link rel="stylesheet" href="women_product_detail.css">
</head>
<body>
    <header>
        <div id="navbar">
            <div><img src="logo.jpg" id="logo"></div>
            <a href="index.html">Home</a>
            <a href="Product.html" target="_blank">Products</a>
            <a href="#">Cart</a>
            <a href="#" id="lastAnchor">Login</a>
        </div>
    </header>
    <div id="women-product1" class="women-product">
        <div id="women-product1-pic" class="women-product-pic"></div>
        <div id="women-product1-content" class="women-product-content">
            <p id="name">Denim Jacket</p>  
            <p id="desc">Classic denim jacket with a timeless fit, featuring button-down front and subtle distressed detailsâ€”perfect for effortless, everyday style.</p>
            <div id="rating">
                <span>3.5</span>
                <i class="fa-regular fa-star"></i>
            </div>
            <p id="price">&#8377 2,500</p>
            <div id="colors1" class="colors">
                <p>Available colors:</p>
                <div id="p1c1" class="colorchoice"></div>
                <div id="p1c2" class="colorchoice"></div>
            </div>
            <div id="sizes">
                <p>Available sizes:</p>
                <div id="size1">S</div>
                <div id="size2">M</div>
                <div id="size3">L</div>
                <div id="size4">XL</div>
                <div id="size5">2XL</div>
            </div>
            <div id="cart">
                <button id="addtocart">Add to Cart</button>
            </div>
        </div>
    </div>
    <!-- In your product detail page (within <script> tags or in an external JavaScript file) -->
<script>
    document.getElementById("addtocart").addEventListener("click", async function() {
        const userId = localStorage.getItem("userId"); 

        if (!userId) {
            alert("Please log in to add items to the cart.");
            window.location.href = "signup.html"; // Redirect to signup page if not logged in
            return;
        }
        const productId = "w01";
        // Prepare data to send to the server
        const data = { userId, productId };

        try {
            const response = await fetch("http://localhost:5000/add-to-cart", {
                method: "POST",
                headers: {
                    "Content-Type": "application/json"
                },
                body: JSON.stringify(data)
            });

            const result = await response.json();

            // Handle the server response
            if (result.success) {
                alert("Item added to cart successfully!");
            } else {
                alert("Failed to add item to cart: " + result.message);
            }
        } catch (error) {
            console.error("Error adding item to cart:", error);
            alert("An error occurred. Please try again later.");
        }
    });
</script>

</body>
</html>